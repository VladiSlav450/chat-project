
[general]
userdata_dir = ../thalcgi_db

[format]
encoding = koi8-r
tags = em strong cite code pre ul ol li dl dt dd ins del
	h1 h2 h3 h4 h5 p br blockquote table td tr a img span
tag_attributes = title a=href img=src img=alt img=height img=width align style class

[captcha]
secret = PLACE *YOUR* SECRET PHRASE HERE!!!
expire = 300

[html]

shorthead = <?xml version="1.0" encoding="koi8-r"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru"> <head> <link type="text/CSS" rel="stylesheet" href="/style.css" /> <link type="image/x-icon" rel="shortcut icon" href="/favicon.png" /> %0% <meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /> <title>THE TITLE OF YOUR SITE</title> </head> <body %1%>

shorttail = </body></html> <!-- generated 14 Jun 2025 19:12:35 +0000 by Thalassa CMS v. 0.3.53 (built May 28 2025) --> 

time_to_edit = 20 minutes

accept_encs = koi8-r,ascii,us-ascii

the_encoding = koi8-r

email_envfrom = do_not_reply@example.com

site_briefname = example.com

content_db_path = ../Site/db

the_site_title = THE TITLE OF YOUR SITE
the_site_motto = THE MOTTO FOR YOUR SITE (or leave blank for no motto)
main_menu = <div class="mainmenu"><a href="/" title="главная страница" class="mainmenu_link">Главная</a> <a href="/news.html" title="News" class="mainmenu_link">News</a> <a href="/sample_page.html" title="пример страницы" class="mainmenu_link">Страница</a> <a href="/sample_story.html" title="пример рассказа (story)" class="mainmenu_link">Рассказ</a> <a href="/thalcgi.cgi/contact" title="письмо владельцу сайта" class="mainmenu_link">Обратная связь</a> <a href="/guestbook/" title="гостевая книга" class="mainmenu_link">Гостевая книга</a> </div>
main_menu_feedback = <div class="mainmenu"><a href="/" title="главная страница" class="mainmenu_link">Главная</a> <a href="/news.html" title="News" class="mainmenu_link">News</a> <a href="/sample_page.html" title="пример страницы" class="mainmenu_link">Страница</a> <a href="/sample_story.html" title="пример рассказа (story)" class="mainmenu_link">Рассказ</a> <p class="mainmenu_curr">Обратная связь</p> <a href="/guestbook/" title="гостевая книга" class="mainmenu_link">Гостевая книга</a> </div>


text_from = От
text_unverified = не проверено
text_in_reply_to_cmt1 = в ответ на
text_in_reply_to_cmt2 = этот комментарий
text_in_reply_to_cmt3 = 


 # these are currently used by the Agenda template only
text_nav_previous = предыдущий
text_nav_next = следующий
text_nav_index = список


[comments]
dir = ../Site/db/comments/

page_regen_command = %[collapsews:
+ ../thalassa/cms/thalassa -c ../Site gen -g
+   %[switch:%[reqarg:realm]:pg:set=pages:gb:list=guestbook]=%[reqarg:pgid]
+   -s ]

recent_timeout = 20



[feedback]
envelope_from = do_not_reply@example.com





[html]

text_setcookie = <h2>Установить cookie?</h2>
+<p>Интерактивные возможности этого сайта не работают без cookie;
+этот механизм используется для отслеживания состояния сеанса работы.
+Cookie &mdash; это пара из имени и значения, которая хранится в
+вашем браузере; браузер отправляет информацию о сохранённых cookies
+вместе с каждым запросом страниц сайта. На этом сайте мы не
+занимаемся слежкой за пользователем и не устанавливаем никаких
+cookie иначе как по прямой инициативе пользователя; <strong>все
+возможности сайта, за исключением интерактивных, доступны без установки
+cookie.</strong> Вы можете
+вернуться назад кнопкой &laquo;Back&raquo; или перейти на
+<a href="/">главную страницу</a> и продолжить читать контент сайта
+без установки cookie; вы только не сможете, например, оставлять
+комментарии.  Если интерактивные возможности потребуются вам позже,
+сайт снова предложит вам установить cookie.</p>
+<p>Вы можете установить cookie, нажав на кнопку, расположенную ниже.  При
+этом в ваш браузер будет отправлена ровно одна cookie с именем
+<code>thalassa_sessid</code>; её значением будет случайно сгенерированная
+строка, которую сервер будет использовать, чтобы отличать ваши действия на
+сайте от действий других посетителей.  Значение будет состоять из двух
+частей, разделённых подчёркиванием, причём одна из двух частей будет меняться
+при каждом вашем обращении к интерактивной части сайта.  Это сделано,
+чтобы предотвратить перехват значения cookie и его использование без
+вашего ведома.</p>
+<p>Вы можете в любой момент убрать cookie из своего браузера; для этого
+на всех страницах, предполагающих интерактивное взаимодействие с сайтом,
+предусмотрена специальная кнопка.  Используя настройки своего браузера,
+вы можете убедиться, что мы всё делаем честно.</p>
+<p>Поскольку рабочий сеанс регистрируется на стороне сервера, теоретически
+его можно использовать для DoS-атаки (путём создания миллионов сеансов),
+поэтому мы совмещаем установку cookie с проверкой, отсекающей
+&laquo;ботов&raquo;.</p>


text_setcookie_warning =
+<p>Нажимая на кнопку, вы подтверждаете своё согласие на установку и
+использование cookie в соответствии с указанными выше условиями.</p>


text_login_invitation =
+<p>Для входа на сайт потребуется одноразовый пароль из тех, которые
+были ранее высланы на ваш адрес электронной почты.  Пароли из списка
+можно использовать в любом порядке; после успешного использования
+пароль перестаёт быть валидным и не может быть использован снова.
+Если у вас закончились одноразовые пароли или вы их потеряли, вы
+можете запросить новый список паролей; для этого введите ваш
+идентификатор пользователя (входное имя) и нажмите на кнопку
+&laquo;Прислать ещё пароли&raquo;.  Учтите, что это можно сделать,
+если у вас не осталось одноразовых паролей, либо если с момента
+последней отправки паролей прошло не менее суток.  После отправки
+нового списка паролей сервер забывает старые пароли, если такие
+ещё остались.</p>
+<p>Если у вас нет учётной записи на этом сайте, вы можете
+<a href="%[req:script]/signup">зарегистрироваться</a>.  Это не
+обязательно, но рекомендуется, если вы собираетесь участвовать в
+дискуссиях.</p>


text_email_change =
+<p>Для изменения адреса электронной почты необходимо подтверждение.
+ После нажатия на кнопку &laquo;Выслать код&raquo; на введённый вами
+ адрес будет направлено письмо, содержащее код подтверждения. На этой
+ странице появится поле для ввода кода.  Ввести код можно будет как
+ сразу, так и вернувшись на эту страницу позднее.  Будьте внимательны
+ при вводе адреса!  Отправить код на какой-то другой адрес можно будет
+ не ранее чем через сутки; повторно отправить код на тот же самый
+ адрес &mdash; только через месяц.  Если вы всё-таки сделаете ошибку
+ и по какой-либо причине у вас не окажется достаточно времени на
+ ожидание, свяжитесь с администрацией сайта.</p>


text_email_change_code =
+<p>Вы запросили его замену на адрес <strong>%[sess:usernewemail]</strong>;
+на этот адрес было отправлено письмо, содержащее код
+подтверждения.  Вы можете завершить смену адреса,
+введя полученный код в форму, расположенную ниже.
+Пока вы не подтвердите изменение адреса, оно не вступит в силу,
+так что система будет по-прежнему считать вашим адрес
+%[sess:useremail].</p>


text_email_change_cancel =
+<p>Вы также можете отменить смену адреса.  Учтите, что запросить смену
+адреса на какой-то другой вы сможете не ранее чем через сутки после
+предыдущего запроса, а отправить код подтверждения на адрес, куда такой
+код уже отправлялся, но подтверждения не последовало,
+система позволит не ранее чем через месяц.</p>
+<p>Чтобы отменить смену адреса, введите слово <em>really</em> в поле
+ввода (для подтверждения) и нажмите кнопку.</p>


text_email_change_cooldown =
+<p>Судя по всему, вы недавно меняли адрес, либо запрашивали изменение,
+но затем отменили запрос.  Новый запрос можно будет сделать не раньше, чем
+через 24 часа после предыдущего.  Если по каким-то причинам вы не можете
+ждать, свяжитесь с администрацией сайта.</p>



text_signup_invitation = <h2>Регистрация</h2>
+<p>На этом сайте не применяется шифрование трафика, что делает
+рискованной традиционную схему аутентификации пользователей по
+паролю.  Вместо обычных паролей, по одному для каждого пользователя,
+как это делается в другие местах, здесь применяются <strong>списки
+одноразовых паролей</strong>.</p>
+<p>Обратите внимание, что для регистрации необходим <strong>адрес электронной
+почты</strong>.  Он доступен только вам и администраторам сайта,
+используется исключительно для отправки одноразовых паролей,
+никому никогда не передаётся (во всяком случае, по доброй воле хозяев
+сайта), не включается ни в какие рассылки; сайт направляет на этот адрес
+сообщения только по инициативе пользователя.
+В то же время адрес должен быть рабочим, доступным вам и оставаться
+таковым, пока вы пользуетесь сайтом.  Без паролей, направляемых на этот
+адрес, вы не сможете войти на сайт.</p>
+<p><strong>Идентификатор пользователя</strong> &mdash; это имя, которое
+вы будете использовать для входа на сайт.  Оно должно состоять из <strong>
+латинских букв <em>нижнего</em> регистра, цифр и знака подчёркивания,
+начинаться с буквы и состоять не менее чем из четырёх, но не более чем из
+10 символов</strong>.  Идентификатор пользователя на страницах сайта
+не показывается, но его можно увидеть в составе адреса страницы вашего
+профиля.</p>
+<p><strong>Имя пользователя</strong> &mdash; это то имя, под которым
+вы будете известны другим посетителям сайта.  Здесь не такие серьёзные
+ограничения, имя может содержать русские и латинские буквы обоих
+регистров, пробелы, знаки препинания, входящие в обычный набор
+&laquo;клавиатурных&raquo; символов.  Если говорить совсем строго, здесь
+допускаются любые символы кодировки %[html:the_encoding], поскольку именно
+она является рабочей для данного сайта.  Вы можете изменить своё имя
+пользователя позднее.</p>
+<p>Вы также можете указать ссылку на ваш сайт, если он у вас есть.
+Просьба НЕ указывать ссылки на всевозможные странички в
+&laquo;соцсетях&raquo;, особенно такие, которые
+не видно без регистрации.  Это поле можно оставить пустым.</p>



text_confirmcode_sent = <h2>Сообщение отправлено</h2>
+<p>На ваш адрес электронной почты направлено письмо, содержащее код
+для подтверждения вашей регистрации.  Вы можете завершить регистрацию,
+введя полученный код в форму на этой странице (см. ниже).  Вы также можете
+закрыть эту страницу и подтвердить регистрацию позже; для этого
+войдите на сайт <a href="%[req:script]/login">обычным путём</a> под
+именем <strong>%[sess:user]</strong>, используя код из письма
+вместо пароля.</p>
+<p>Код из письма действует только один раз.  После входа на сайт по этому
+коду система будет считать вашу регистрацию подтверждённой, в том числе
+введённый вами адрес электронной почты &mdash; достоверно вашим.
+При следующем входе на сайт запросите (нажатием соответствующей кнопки)
+список одноразовых паролей, он будет выслан на вашу электронную почту.
+</p>


text_contact_form_intro =
+<p>С помощью этой формы вы можете отправить электронное письмо (email)
+владельцу сайта.  Просьба выбрать подходящую категорию.</p>
+<p>Адрес электронной почты используется <strong>исключительно</strong> для
+ответа, нигде не публикуется, не помещается ни в какие списки и никому не
+передаётся.</p>


text_premod_warning =
+<p>Просьба учитывать, что на сайте производится премодерация.</p>


text_queued_for_moderation =
+   <p>Согласно настройкам сайта комментарий помещён в очередь на
+   премодерацию и появится на сайте после проверки и одобрения
+   (либо не появится, если не будет одобрен).</p>


text_comment_or_page_not_found = 
+<p>Не существует либо такой страницы комментариев, либо такого
+комментария, чтобы на него ответить.  Чаще всего эта ошибка
+появляется при попытке вручную задать или изменить параметры
+в адресной строке браузера.  Если ошибка проявилась в результате
+перехода по ссылке, расположенной на одной из страниц сайта,
+сообщите об этом владельцу сайта.</p>

text_anonymous_cant_comment = <p>Настройки сайта не позволяют анонимным
+пользователям оставлять комментарии.</p>

text_you_cant_comment = <p>Настройки сайта не позволяют вам оставлять
+комментарии.</p>

text_comments_disabled_here =
+<p>На странице, которую вы пытаетесь комментировать, добавление
+новых комментариев отключено.  Вообще говоря, вы просто
+не должны были сюда попасть; если сюда вы пришли по ссылке,
+находящейся где-то на сайте, сообщите об этом владельцу сайта.</p>


[retrycaptchapage]

template = %html:header:/% <h2>Не удалось пройти проверку</h2>
+<p>К сожалению, мы не смогли убедиться, что имеем дело не с роботом.
+Приносим свои глубочайшие извинения, если мы неправы.  Проверка не 
+прошла по следующей причине: %errmessage%  Попробуйте снова!
+%html:cookieform%
+%html:footer%

errmessage:ip_mismatch = <strong>ip-адрес не совпадает</strong>.  Возможно, вы
   переподключились к Интернету между получением капчи и её отправкой.
errmessage:expired = <strong>истекло отведённое время</strong> (5 минут).
errmessage:broken_data = <strong>в запросе обнаружены данные неправильной
   структуры</strong>. Скорее всего, это проблема на стороне сервера; если
   ошибка повторяется, свяжитесь с владельцем сайта.
errmessage:wrong_answer = <strong>неправильный ответ на предложенную
   задачу</strong>.  Постарайтесь быть внимательнее.
errmessage:unknown = <strong>неизвестная причина</strong>.
   При обычной работе такого происходить не должно, сообщите об этом
   владельцу сайта.


[servicemail]

subject:passwords = доступ к %[html:site_briefname]

body:passwords = Ваши новые одноразовые пароли:
+
+%[passwords]
+
+До встречи на сайте!
+

subject:confirm = %[html:site_briefname]: подтверждение адреса

body:confirm =
+Кто-то (скорее всего, Вы сами) указал %[receiver]
+на сайте stolyarov.info в качестве своего адреса электронной почты.
+Если это были не Вы, проигнорируйте это письмо; повторных писем
+на Ваш адрес больше не придёт.
+
+Чтобы подтвердить, что Вы действительно являетесь владельцем
+этого адреса, зайдите на сайт и введите следующий код:
+
+%[confirmcode]
+ 

# In this file, you can configure how the contact form
# behaves on your site, primarily the list of feedback
# categories and the email addresses for each of the
# category.

# Please note if you need to change the text displayed
# right before the form (on the /thalcgi.cgi/contact
# page), it is done by editing the cgitexts.ini file.


[feedback]

# Enumerate "categories" for the feedback,
# using a distinct itentifier for each of them.
# Please note you need at least one of them.
# For every category, set below their brief
# explanations and the email addresses where to
# send the feedback to.
#
categories = sales support law site private general

# fill in a "visible" (but nonetheless short) explanation
# for each of the categories
#
cattitle:sales = Вопросы по продажам
cattitle:support = Техническая поддержка наших пользователей
cattitle:law = Официальные запросы и другие сообщения нашим юристам
cattitle:site = Сообщение об ошибке или опечатке на сайте
cattitle:private = Личное сообщение директору
cattitle:general = Сообщения, для которых нет подходящей категории

# If you want one of the categories to be preselected by default,
# uncomment this and replace the word "site" with the appropriate
# (desired) identifier
#
#selected:site = yes


# set email addresses for each of the categories
#
email:sales = sales@example.com
email:support = support@example.com
email:law = attorneys@example.com
email:site = webmaster@example.com
email:private = george_smith@example.com
email:general = info@example.com

# If desired, you can set the "last resort" email
# here.  If you do, some (or even all) of the specific
# "email:whatever" parameters above may be omitted.
#
#email = general_questions@example.com

[general]

   # in kilobytes
   # note that per-page limits, if set, override these
post_content_limit = 200

   # used for multipart/form-data format only
post_param_limit = 32



[html]

empty =

 # %0% - url  %1% - text  %2% - command name  %3% - aux param, e.g. target
buttonform =
+<form name="%2%" action="%0%" method="POST" style="margin: 1em" %3%>
+<input type="submit" value=%[q:%1%] />
+</form>
+

cookieform =
+<img alt="captcha" style="float:right;"
+ src="data:image/jpg;base64,%[captcha:image]" />
+<form name="captcha" action="%[req:script]%[req:path]" method="POST">
+<input type="hidden" name="captcha_ip" value=%[q:%[captcha:ip]] />
+<input type="hidden" name="captcha_time" value=%[q:%[captcha:time]] />
+<input type="hidden" name="captcha_nonce" value=%[q:%[captcha:nonce]] />
+<input type="hidden" name="captcha_token" value=%[q:%[captcha:token]] />
+<label for="captcha_input">%[html:msg_solve_captcha]</label><br/>
+<input type="text" id="captcha_input" name="captcha_response"
+   style="margin: 1em;"><br/>
+<input type="hidden" name="command" value="setcookie" />
+<input type="submit" value="%[html:msg_set_cookie]"
+   style="margin: 1em;">
+</form>
+

msgbox = <div class="messagebox_%[ifmessageok:ok:err]">%0%</div>

emailcat = <option %[collapsews:%[if:%[req:param:%0%]:
+  %[ifeq:%[req:param:%0%]:%1%:selected]:
+  %[feedback:ifcatsel:%1%:selected]]
+value=%[q:%1%]>]%[feedback:cattitle:%1%]</option>
+

loggedonly = <h2>%[html:msg_logged_only]</h2>
+

closetochange =
+%[sess|ifhasuser|<p class="form_comment">%[html:msg_to_change_uid]</p>|]
+


#   %0% = gb|pg    %1% = page_id   %2% = comment_id
premodqitem = <li id="%0%%1%c%2%">
+(<a href="/%[switch:%0%:gb:%[html:gb_uri:%1%]:pg:%1%.html]">%0%-%1%</a>)
+<strong>%[cmtinfo:username:%0%_%1%:%2%]</strong>
+%[cmtinfo:ifanon:%0%_%1%:%2%::
+   (<a href="%[req:script]/profile/%[cmtinfo:user:%0%_%1%:%2%]"
+      >%[cmtinfo:user:%0%_%1%:%2%]</a>):]
+<a href="%[req:script]/cmta/%0%/%1%/%2%">%[cmtinfo:title:%0%_%1%:%2%]</a>
+</li>

#   %0% = gb|pg    %1% = page_id   %2% = comment_id
cmtlistitem = <tr id="c%2%"><td>
+%[cmtinfo:ifparent:%0%_%1%:%2%:
+    <a href="#c%[cmtinfo:parent:%0%_%1%:%2%]">&#x2BB4;
+        %[cmtinfo:parent:%0%_%1%:%2%]</a>:
+    &#x261E;]
+</td><td style="padding-right:0.5em"><strong>%2%</strong></td><td>
+<strong>%[cmtinfo:username:%0%_%1%:%2%]</strong>
+%[cmtinfo:ifanon:%0%_%1%:%2%::
+   (<a href="%[req:script]/profile/%[cmtinfo:user:%0%_%1%:%2%]"
+      >%[cmtinfo:user:%0%_%1%:%2%]</a>):]
+<a href="%[req:script]/cmta/%0%/%1%/%2%">%[cmtinfo:title:%0%_%1%:%2%]</a>
+</td><td>
+%[foreach:%[cmtinfo:flags:%0%_%1%:%2%]:html:tagflag]
+</td></tr>

tagflag = <span class="tag">%0%</span>&#32;


permissions = <h2>%[html:msg_permissions]</h2>
+%[sess:ifloggedin:<p>%[html:msg_logged_as] %[sess:loggeduser]</p>]
+<p>Your role list: %[sess:roles]</p>
+%[ifperm:post:<p>%[html:msg_can_comment]</p>]
+%[ifperm:seehidden::<p>%[html:msg_can_see_hidden]</p>:
+  %[ifperm:seehidden:%[sess:loggeduser]:<p>%[html:msg_can_see_own]</p>]
+]
+%[ifperm:moderation:<p>%[html:msg_one_of_the]
+  <a href="%[req:script]/moderation">%[html:msg_moderators]</a>.</p>]
+%[ifperm:edit:::<p>%[html:msg_can_edit]</p>:
+  %[ifperm:edit:%[sess:loggeduser]::
+     <p>%[html:msg_can_edit_own]</p>:
+     %[ifperm:edit:%[sess:loggeduser]:%now%:
+         <p>%[html:msg_edit_comment_within] %[html:time_to_edit].</p>
+     ]
+  ]
+]

jumpmain = <a href="/">%[html:msg_to_main_page]</a>


form_instr_tag = <span> </span><code>&lt;%0%&gt;</code>

format_instruction = <p>%[html:msg_comment_format_tip]
+  %[foreach:%[cmtinfo:tags]:html:form_instr_tag].</p>







#######################################################################
# special pages
#

[errorpage]

template = %html:header%
+<h2 style="margin:2em;">%errcode% %errmessage%</h2>
+%[html:jumpmain]
+<hr />
+ %html:footer%


[nocookiepage]

template = %html:header% %html:text_setcookie%
+%html:cookieform% %html:text_setcookie_warning%
+%html:footer%
+


#######################################################################
# generic pages
#


[page /]

session_required = yes
embedded = no
post_allowed = no

selector = %[sess:ifloggedin:
               userlogged:
               %[sess:ifhasuser:
                   usernotlogged:
                   nouser
               ]
           ]

template = %[html:header] <h2>Session is active</h2>
+<p>New cookie's value: <code>thalassa_sessid = %[sess:cookie]</code></p>
+<p>Previous cookie's value (from your browser's request):
+    <code>%[req:cookie:thalassa_sessid]</code></p>
+%[page:userinfo]
+%[html:permissions]
+<p><a href="/">%[html:msg_to_main_page]</a></p>
+<hr />
+%html:footer%
+

userinfo:userlogged = <h2>You are logged in</h2>
+<p>User id (login name): %[html:userproflink]</p>
+<p>Visible user name: <strong>%[sess:username]</strong></p>
+<p>Email address: <strong>%[sess:useremail]</strong></p>
+<p>Site: <strong>%[sess:usersite]</strong></p>

userinfo:usernotlogged =  <br /><br />
   <p>User name: %[sess:user] (not confirmed)</p>
   %[page:loginref]

userinfo:nouser = %[page:loginref]

loginref = <p><a href="%[req:script]/login">Login</a></p><br />


[page /check]

session_required = no
embedded = no
post_allowed = no

selector = %[sess:ifvalid:sess:nosess]

template = %[html:header]
+%[page:sessinfo]
+%[html:permissions]
+
+<h2>Additional info</h2>
+<p>Your address and port:
+<code>%[getenv:REMOTE_ADDR]:%[getenv:REMOTE_PORT]</code></p>
+<p>HTTP Referer: <code>%[getenv:HTTP_REFERER]</code></p>
+<p>User Agent: <code>%[getenv:HTTP_USER_AGENT]</code></p>
+%html:footer%
+

sessinfo:sess = <h2>Session is active</h2>
+  <p>New cookie value: <code>thalassa_sessid = %[sess:cookie]</code></p>
+  <p>Old cookie value:
+      <code>%[req:cookie:thalassa_sessid]</code></p>

sessinfo:nosess = <h2>No session</h2>
+  <p>Cookie named <code>thalassa_sessid</code> is not set.</p>


[page /rmsession]

session_required = no
embedded = no
post_allowed = yes

action = rmsession

template = %[html:header]
+%[sess:ifvalid:
+<p>%[html:msg_sess_active]</p>
+<a href="%[req:script]/">%[html:msg_more_info]</a>
+   :
+<p>%[html:msg_no_cookie]</p>
+<a href="%[req:script]/">%[html:msg_more_info]</a><br />
+%[html:jumpmain]
+]
+%html:footer%



[page /login]

session_required = yes
embedded = no
post_allowed = yes
action = login

selector = %[sess:ifloggedin:logged:notlogged]

template = %[html:header] %[page:body] %html:footer%

body:logged =
+<p>%[html:msg_logged_as] %[html:userproflink].</p>
+<p>%[html:msg_close_sess_to_logout]</p>
+%[html:jumpmain]
+<hr />
+

body:notlogged = %[html:text_login_invitation]
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+  accept-charset="%[html:accept_encs]" name="loginform">]
+<div class="form_item"><div>
+    <label for="input_login">User id:</label>
+    <input type="text" name="login" id="input_name" size="24" tabindex="1"
+        value=%[q:%[sess:ifhasuser:%[sess:user]:%[req:param:login]]]
+        style="display: inline" %[sess:ifhasuser:readonly:] />
+    <button %[sess:ifhasuser:disabled:]
+        form="jump_reg" tabindex="4">%[html:msg_signup]</button>
+    %[html:closetochange]
+</div></div>
+<div class="form_item"><div>
+    <label for="input_passtoken">%[html:msg_single_use_pass]:</label>
+    <input type="text" name="passtoken" id="input_passtoken" size="24"
+     value=%[q:%[req:param:passtoken]] style="display: inline" tabindex="2" />
+    <button type="submit" name="sendmorepass" value="yes"
+          tabindex="5">%[html:msg_send_more_pass]</button>
+</div></div>
+<div class="form_item"><div>
+    <input type="submit" value="Log in!" tabindex="3" />
+</div></div>
+</form>
+<form id="jump_reg" action="%[req:script]/signup" method="get"></form>
+<hr />



[page profile]

session_required = no
embedded = no
post_allowed = yes
action = profile %1%

selector =
+%[if:%1%:
+    %[profile:%1%:ifexists:show:unknown]:
+    %[sess:ifloggedin:edit:unavail]
+]

template = %[html:header] %[page:body]
+<hr class="clear_both" />
+%html:footer%

body:show = <h2>User profile <code>%[profile:%1%:id]</code></h2>
+<p>%[html:userpic_choice:%[profile:%1%:id]]
+User id (login name):
+<span style="font:monospace 120%% bold">%[profile:%1%:id]</span><br />
+Visible user name: <strong>%[profile:%1%:realname]</strong><br />
+Site: <strong>%[profile:%1%:site]</strong><br />
+%[if#%[profile#%1%#comment]#%[html:msg_comment]: %[profile#%1%#comment]<br />]
+</p>
+

body:unknown = <h2><code>%[profile:%1%:id]</code>:
+ %[html:msg_user_unknown]</h2>
+

body:edit = <h2>%[html:msg_your_profile]</h2>
+<p>%[html:msg_user_id]: <strong>%[sess:user]</strong></p>
+<hr />
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+     accept-charset="%[html:accepts_encs]">]
+<div class="form_item"><div>
+    <label for="input_username">%[html:msg_visible_name]:</label>
+    <input type="text" name="username" id="input_username" size="40"
+        value=%[q:%[sess:username]] />
+</div></div>
+<div class="form_item"><div>
+    <label for="input_usersite">%[html:msg_site_url_field]:</label>
+    <input type="text" name="usersite" id="input_usersite" size="40"
+        value=%[q:%[sess:usersite]] />
+</div></div>
+<div class="form_item"><div>
+    <input type="submit" value="%[html:msg_do_save]" />
+</div></div>
+</form>
+<hr />
+<form action="%[req:script]/changemail" method="get">
+<p>%[html:msg_email_field]: <strong>%[sess:useremail]</strong>
+   <button type="submit" style="margin-left:2em">%[html:msg_do_change]</button></p>
+</form>
+

body:unavail = %[html:loggedonly]


[page /changemail]

session_required = yes
embedded = no
post_allowed = yes
action = changemail

selector =
+%[sess:ifloggedin:
+    %[sess:ifchangemail:
+        confirm:
+        %[sess:ifcanchangemail:request:cooldown]
+    ]:
+    unavail
+]

template = %[html:header] %[page:body] <hr /> %html:footer%

body:unavail = %[html:loggedonly]


comhdr = <h2>%[html:msg_email_change]</h2>
+<p>%[html:msg_your_current_email]: <strong>%[sess:useremail]</strong></p>
+

body:request = %[page:comhdr] %[html:text_email_change]
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+     accept-charset="%[html:accept_encs]">]
+<div class="form_item"><div>
+  <label for="input_newemail">%[html:msg_new_email]:</label>
+  <input type="text" name="newemail" id="input_newemail" size="40"
+      value=%[q:%[req:param:newemail]] tabindex="1" />
+</div></div>
+<div class="form_item"><div>
+  <label for="input_passtoken">%[html:msg_single_use_pass]:</label>
+  <input type="text" name="passtoken" id="input_passtoken" size="24"
+      value=%[q:%[req:param:passtoken]] tabindex="2" />
+</div></div?
+<div class="form_item"><div>
+  <input type="submit" value="%[html:msg_send_confirmcode]" tabindex="3" />
+</div></div>
+</form>
+

body:confirm = %[page:comhdr] %[html:text_email_change_code]
+%[collapsews:<form action="%[req:script]/changemail" method="post"
+  accept-charset="%[html:accept_encs]" >]
+<div class="form_item"><div>
+    <label for="input_confirmcode">%[html:msg_confirm_code]:</label>
+    <input type="text" name="confirmcode" id="input_confirmcode" size="24"
+          style="display:inline" />
+    <input type="submit" value="Confirm" style="display:inline" />
+</div></div>
+</form>
+<hr /> %[html:text_email_change_cancel]
+<form action="%[req:script]/changemail" method="post">
+<input type="hidden" name="cancel_change" value="yes" />
+<div class="form_item"><div>
+    <label for="input_really"
+                 style="display:inline">%[html:msg_confirm_really]:</label>
+    <input type="text" name="really" id="input_really" size="10"
+          style="display:inline" />
+    <input type="submit" value=%[q:%[html:msg_cancel_addr_change]]
+          style="display:inline" />
+</div></div>
+</form>
+

body:cooldown = %[page:comhdr]
+%[ifactresultok::%[html:text_email_change_cooldown]]




[page /signup]

session_required = yes
embedded = no
post_allowed = yes
action = signup

selector =
    %[sess:ifloggedin:
       logged:
       %[ifactresultok:confirmsent:notlogged]
    ]

template = %[html:header] %[page:body] %html:footer%

body:logged = <h2>%[html:msg_logged_as] %[html:userproflink]</h2>

body:notlogged = %[html:text_signup_invitation]
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+     accept-charset="%[html:accept_encs]">]
+<div class="form_item"><div>
+    <label for="input_userid">User id:</label>
+    <input type="text" name="userid" id="input_userid" size="15"
+        value=%[q:%[sess:ifhasuser:%[sess:user]:%[req:param:userid]]]
+        %[sess:ifhasuser:readonly:] />
+    %[html:closetochange]
+</div></div>
+<div class="form_item"><div>
+    <label for="input_username">%[html:msg_visible_name]:</label>
+    <input type="text" name="username" id="input_username" size="40"
+        value=%[q:%[req:param:username]] />
+</div></div>
+<div class="form_item"><div>
+    <label for="input_useremail">%[html:msg_email_field]:</label>
+    <input type="text" name="useremail" id="input_useremail" size="40"
+        value=%[q:%[req:param:useremail]] />
+</div></div>
+<div class="form_item"><div>
+    <label for="input_usersite">%[html:msg_site_url_field]:</label>
+    <input type="text" name="usersite" id="input_usersite" size="40"
+        value=%[q:%[req:param:usersite]] />
+</div></div>
+<div class="form_item"><div>
+    <input type="submit" value=%[q:%[html:msg_do_signup]] />
+</div></div>
+</form>
+<hr />
+

body:confirmsent = %[html:text_confirmcode_sent]
+%[collapsews:<form action="%[req:script]/login" method="post"
+  accept-charset="%[html:accept_encs]" name="loginform">]
+<input type="hidden" name="login" value=%[q:%[sess:user]] />
+<div class="form_item"><div>
+    <label for="input_passtoken">%[html:msg_confirm_code]:</label>
+    <input type="text" name="passtoken" id="input_passtoken" size="24"
+        value=%[q:%[req:param:passtoken]] />
+</div></div>
+<div class="form_item"><div>
+    <input type="submit" value=%[q:%[html:msg_do_submit]] />
+</div></div>
+</form>


[page contact]

session_required = yes
embedded = no
post_allowed = yes

selector = %[ifactresultok:sent:form]

action = feedback %1%

path_predicate =
+%[if:%1%:
+   %[if:%2%:no:
+      %[ifbelongs:%1%:%[feedback:categories]:yes:no]
+      :no
+   ] :
+   yes
+]

template = %[html:header:feedback] %[page:body] %html:footer:feedback%

body:form = %[html:text_contact_form_intro]
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+     accept-charset="%[html:accept_encs]">]
+<div class="form_item"><div>
+    <label for="input_name">Your name:</label>
+    <input type="text" name="name" id="input_name" size="60"
+    value=%[q:%[sess:ifloggedin:%[sess:username]:%[req:param:name]]] />
+</div></div>
+<div class="form_item"><div>
+    <label for="input_mail">%[html:msg_your_email_field]:</label>
+    <input type="text" name="mail" id="input_mail" size="60"
+        value=%[q:%[sess:ifloggedin:%[sess:useremail]:%[req:param:name]]] />
+</div></div>
+<div class="form_item"><div>
+    <label for="input_subject">%[html:msg_subject_field]:</label>
+    <input type="text" name="subject" id="input_subject" size="60"
+        value=%[q:%[req:param:subject]] />
+</div></div>
+<div class="form_item"><div>
+    <label for="input_category">%[html:msg_message_category]:</label>
+    %[if:%1%:<strong>%[feedback:cattitle:%1%]</strong>
+        <input type="hidden" name="category" value=%[q:%1%] />
+        <button type="submit" name="catchange" value="yes" formmethod="post"
+           formaction="%[req:script]/contact">%[html:msg_change_category]
+        </button>
+       :<select name="category" id="input_category">
+          %[foreach:%[feedback:categories]:html:emailcat:category]
+        </select>]
+</div></div>
+<div class="form_item"><div>
+    <label for="input_msgbody">%[html:msg_message_text_field]:</label>
+    <textarea name="msgbody" id="input_msgbody" cols="60" rows="5"
+        resizable="resizable">%[ltgt:%[req:param:msgbody]]</textarea>
+</div></div>
+<div class="form_item"><div>
+    <input type="submit" value=%[q:%[html:msg_do_send_message]] />
+</div></div>
+</form>
+<hr />
+

body:sent = <h2>%[html:msg_message_sent_hdr]</h2>
            <p>%[html:msg_message_sent]</p>
            <p>%[html:jumpmain]</p>




[page comment]

session_required = yes
embedded = no
post_allowed = yes

check_fnsafe = '%1%' '%2%' %[if:%3%:'%3%']
action = comment_add %3%

path_predicate = %[discuss:iffound:%3%:yes:no]

reqargs = realm pgid
reqarg:realm = %[switch:%1%:gb:gb:pg:pg]
reqarg:pgid = %2%

selector =
+%[ifactresultok:
+    justposted
+:
+    %[ifperm:post:
+        %[discuss:iffound:%3%:
+            %[if:%3%:
+                %[discuss:ifhidden:%3%:
+                    hidden
+                :
+                    %[cmtpreview:if:preview:reptocomment]
+                ]
+            :
+                %[cmtpreview:if:preview:toplevel]
+            ]
+        :
+            notfound
+        ]
+    :
+        nopermission
+    ]
+]

template = %[html:header] %[page:body] <hr /> %html:footer%

refposted =
    <a href="%[req:script]/cmta/%1%/%2%/%[justposted:comment]">

body:justposted = <h2>Comment submitted</h2>
+%[collapsews:
+%[justposted:ifhidden:
+   %[html:text_queued_for_moderation]
+   %[ifperm:seehidden:%[sess:loggeduser]:
+       <p>%[page:refposted]%[html:msg_view_your_comment_status]</a></p>
+   :
+   ]
+]
+]
+<a href="/">%[html:msg_to_main_page]</a><br /><br />
+<a href="%[discuss:orig_url:%3%]">%[html:msg_jump_to_origin]</a>
+<br /><br />
+%[justposted:ifhidden:
+  %[ifperm:seehidden:%[sess:loggeduser]:
+     %[page:refposted]%[html:msg_view_your_comment]</a>:]
+  :
+  <a href="%[discuss:orig_url:%[justposted:comment]]"
+      >%[html:msg_jump_to_new_comment]</a>
+]


body:toplevel = <h2>%[html:msg_top_level_comment_hdr]</h2>
+<blockquote>
+%[if:%[discuss:title:%3%]:<h3>%[discuss:title:%3%]</h3>]
+%[discuss:body:%3%]
+</blockquote>
+%[page:form_if_enabled]

body:reptocomment = <h2>%[html:msg_rep_to_comment_hdr]</h2>
+    %[html:showcomment:%3%]
+    %[page:form_if_enabled]

body:preview = <h2>%[html:msg_comment_preview_hdr]</h2>
+    %[html:comment_preview:%3%:%[discuss:page_url:%3%]]
+    %[page:theform]

body:hidden = <h2>%[html:msg_comment_hidden_hdr]</h2>
+<p>%[html:msg_cant_reply_hidden]</p>
+%[html:jumpmain]
+

body:notfound = <h2>%[html:msg_comment_not_found_hdr]</h2>
+%[html:text_comment_or_page_not_found]
+%[html:jumpmain]
+

body:nopermission = <h2>%[html:msg_permission_denied]</h2>
+%[html:%[sess:ifloggedin:text_you_cant_comment:text_anonymous_cant_comment]] 
+%[html:jumpmain]
+

form_if_enabled = %[page:%[discuss:ifenabled:%3%:theform:disabled]]

###################################################################

theform =
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+     accept-charset="%[html:accept_encs]" id="the_form">]
+<div class="form_item"><div>
+    <label for="input_name">%[html:msg_comment_visname_field]:</label>
+    <input type="text" name="name" id="input_name" size="60"
+        value=%[q:%[sess:ifloggedin:%[sess:username]:%[or:%[req:param:name]:%[sess:username]]]]
+        %[sess:ifloggedin:readonly] />
+</div></div>
+<div class="form_item"><div>
+    <label for="input_subject">%[html:msg_comment_subject_field]:</label>
+    <input type="text" name="subject" id="input_subject" size="60"
+        value=%[q|%[or|%[req|param|subject]|%[if|%3%|Re: %[discuss|title|%3%]]]] />
+</div></div>
+<div class="form_item"><div>
+    <label for="input_cmtbody">%[html:msg_comment_text_field]:</label>
+    <textarea name="cmtbody" id="input_cmtbody" cols="60" rows="5"
+        resizable="resizable">%[ltgt:%[req:param:cmtbody]]</textarea>
+</div></div>
+<div class="form_item"><div>
+    <input type="submit" value=%[q:%[html:msg_do_submit]] style="display: inline" />
+    <button type="submit" name="preview" value="yes">%[html:msg_do_preview]</button>
+</div></div>
+</form>
+%[html:format_instruction]
+%[html:text_premod_warning]
+

disabled = <h2>%[q:%[html:msg_comments_disabled_hdr]Comments disabled</h2>
+%[html:text_comments_disabled_here]
+%[html:jumpmain]
+




[page cmta]

session_required = yes
embedded = no
post_allowed = yes

check_fnsafe = '%1%' '%2%' %[if:%3%:'%3%']
action = comment_edit %3%

reqargs = realm pgid
reqarg:realm = %[switch:%1%:gb:gb:pg:pg]
reqarg:pgid = %2%

path_predicate =
+%[ifactresultok:yes:
+    %[if:%3%:%[discuss:iffound:%3%:yes:no]:no]
+]

selector =
+%[discuss:iffound:%3%:
+   %[discuss:ifhidden:%3%:
+      %[ifperm:seehidden:%[discuss:user:%3%]:show:hidden]:
+      show]:
+   notfound
+]

template = %[html:header] %[page:body] <hr /> %html:footer%

body:hidden = <h2>%[html:msg_comment_hidden_hdr]</h2>

body:notfound = <h2>%[html:msg_comment_not_found_hdr]</h2>
    %[page:%[ifperm:moderation:modernavblock:empty]]

empty =

body:show = <h2>%[html:msg_comment_view_hdr]</h2>
+%[html:showcomment:%3%]
+<p>%[foreach:%[discuss:flags:%3%]:html:tagflag]</p>
+%[page:%[ifperm:edit:%[discuss:user:%3%]:%[discuss:unixtime:%3%]:editform:empty]]
+%[page:%[ifperm:moderation:moderation:empty]]


editform = <br /><hr /><h2>%[html:msg_comment_edit_hdr]</h2>
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+     accept-charset="%[html:accept_encs]" id="the_form">]
+<div class="form_item"><div>
+    <label for="input_subject">%[html:msg_comment_subject_field]:</label>
+    <input type="text" name="subject" id="input_subject" size="60"
+        value=%[q:%[or:%[req:param:subject]:%[discuss:title:%3%]]] />
+</div></div>
+<div class="form_item"><div>
+    <label for="input_cmtbody">%[html:msg_comment_text_field]:</label>
+    <textarea name="cmtbody" id="input_cmtbody" cols="60" rows="5"
+        resizable="resizable"
+    >%[ltgt:%[or:%[req:param:cmtbody]:%[discuss:bodysrc:%3%]]]</textarea>
+</div></div>
+<div class="form_item"><div>
+    <input type="submit" value=%[q:%[html:msg_do_submit]] />
+</div></div>
+</form>
+%[html:format_instruction]
+
+<br /><hr /><h2>%[html:msg_deletion_hdr]</h2>
+<p>%[html:msg_to_delete_comment]</p>
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+     accept-charset="%[html:accept_encs]">]
+<label for="input_really">%[html:msg_confirm_really]:</label>
+<input type="text" name="really" id="input_really" size="10" />
+<input type="hidden" name="delete" value="yes" />
+<input type="submit" value=%[q:%[html:msg_do_delete]] />
+</form>

moderation = <br /><hr />
+%[html:modernavblock::%1%:%2%:%3%]
+<h2 id="moder">%[html:msg_moderation_hdr]</h2>
+%[page:%[discuss:ifhidden:%3%:moder_show:moder_hide]]
+<br />


########################################################

moder_show =
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+     accept-charset="%[html:accept_encs]">]
+<input type="hidden" name="moderation" value="unhide" />
+<label for="submit_show_btn">%[html:msg_hidden_can_show]</label>
+<input type="submit" id="submit_show_btn" value=%[q:%[html:msg_do_show]] />
+</form>
+%[ifbelongs:premod:%[discuss:flags:%3%]:
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+     accept-charset="%[html:accept_encs]">]
+<input type="hidden" name="moderation" value="dequeue" />
+<label for="submit_hide_btn">%[html:msg_can_remove_from_q]</label>
+<input type="submit" id="submit_hide_btn" value=%[q:%[html:msg_do_rm_from_q]] />
+</form>:]

moder_hide =
+%[collapsews:<form action="%[req:script]%[req:path]" method="post"
+     accept-charset="%[html:accept_encs]">]
+<input type="hidden" name="moderation" value="hide" />
+<label for="submit_hide_button">%[html:msg_comment_is_visible]</label>
+<input type="submit" id="submit_hide_button" value=%[q:%[html:msg_do_hide]] />
+</form>



[page moderation]

session_required = yes
embedded = no
post_allowed = no

check_fnsafe = %[if:%2%:'%2%']

path_predicate =
    %[if:%1%:
        %[if:%[switch:%1%:pg:x:gb:x]:
            %[if:%2%:%[if:%3%:no:yes]:reject]
        :
            no
        ]
    :
        yes
    ]


reqargs = realm pgid
reqarg:realm = %[switch:%1%:gb:gb:pg:pg]
reqarg:pgid = %2%

selector = %[ifperm:moderation:%[if:%1%:list:moderation]:noaccess]

template = %[html:header] %[page:body] <hr /> %html:footer%

body:moderation = <h2>%[html:msg_moder_q_hdr]</h2>
    <ul>%[foreach:%[sess:premodq]:splitpremodq:html:premodqitem]</ul>
    <h2><a href="%[req:script]/cmtadmin">%[html:msg_existing_topics]</a></h2>

body:list =
+<h2><a href="/%[switch:%1%:gb:%[html:gb_uri:%1%]:pg:%1%.html]">%1% %2%</a>:
+ comment list</h2>
+<table>
+ %[foreach:%[cmtinfo:list:%1%_%2%]:html:cmtlistitem:%1%:%2%]
+</table>

body:noaccess = <h2>%[html:msg_noaccess]</h2>


[html]

cmtadminref = <li><a href="%[req:script]/cmtadmin/%0%">%0%</a></li>

[page cmtadmin]

session_required = yes
embedded = no
post_allowed = no

check_fnsafe = %[if:%1%:'%1%']

path_predicate = %[if:%1%:%[cmtinfo:iftopic:%1%:yes:no]:yes]

reqargs = page_id
reqarg:page_id = %1%

selector = %[ifperm:moderation:%[if:%1%:list:main]:noaccess]

template = %html:header% %[page:body] <hr /> %html:footer%

body:main =
    <h2>%[html:msg_existing_topics]</h2>
    <ul>
    %[foreach:%[lsort:%[cmtinfo:topics]]:html:cmtadminref]
    </ul>
    <h2><a href="%[req:script]/moderation">%[html:msg_moder_q_hdr]</a></h2>

body:list = <h2>%[reqarg:page_id]: %[html:msg_comment_list]</h2>
    <table>
    %[foreach:%[cmtinfo:list:%[reqarg:page_id]]:
        html:cmtlistitem:%[lhead:%1%:_]:%[ltail:%1%:_]]
    </table>

body:noaccess = <h2>%[html:msg_noaccess]</h2>




[feedback]

send_command = %[collapsews: /usr/sbin/sendmail -bm -i
+   %[if:%[feedback:envfrom]:-f %[feedback:envfrom]] '%[receiver]']

send_data = From: %[req:param:mail]
+To: %[receiver]
+Subject: [%[feedback:cattitle:%[req:param:category]]] %[req:param:subject]
+MIME-Version: 1.0
+Content-Type: text/plain; charset=%[html:the_encoding]
+Content-Transfer-Encoding: 8Bit
+X-Sender-Software: Thalassa CGI script
+X-Sender-Form: %[req:host]%[req:script]%[req:path]
+X-Client: %[getenv:REMOTE_ADDR]:%[getenv:REMOTE_PORT]
+X-HTTP-Referer: %[getenv:HTTP_REFERER]
+
+= "%[req:param:name]" %[html:msg_wrote_via_form]
+
+%[req:param:msgbody]
+




[servicemail]

send_command = %[collapsews: /usr/sbin/sendmail -bm -i
+   -f %[html:email_envfrom] '%[receiver]']

header = From: %[html:email_envfrom]
+To: %[receiver]
+Subject: %[subject]
+MIME-Version: 1.0
+Content-Type: text/plain; charset=%[html:the_encoding]
+Content-Transfer-Encoding: 8Bit
+X-Sender-Software: Thalassa CGI script
+X-Client: %[getenv:REMOTE_ADDR]:%[getenv:REMOTE_PORT]
+



[html]

gb_f_name = guestbook/%[iffile:guestbook/%0%.html:%0%:index].html
gb_uri = guestbook/%[iffile:guestbook/%0%.html:%0%.html:]


[comments]

subdir = %[reqarg:realm]_%[reqarg:pgid]

page_url = /%[switch:%[reqarg:realm]:pg:%[reqarg:pgid].html:gb:%[html:gb_uri:%[reqarg:pgid]]]

# %comment_id% is substituted here
# empty %comment_id% means "top-level" comment (reply to the page itself)
#
orig_url = /%[switch:%[reqarg:realm]:pg:%[reqarg:pgid].html:gb:%[html:gb_uri:%[reqarg:pgid]]]%[if:%[comment_id]:#cmt%[comment_id]:]

page_source = %[ifeq:%[reqarg:realm]:pg:%[html:content_db_path]/pages/%[reqarg:pgid]:]
page_html_file = %[ifeq:%[reqarg:realm]:gb:%[html:gb_f_name:%[reqarg:pgid]]:]
page_html_marks = <!--THALCGI-LABEL-BEGIN-->
                  <!--THALCGI-LABEL-END-->

premodq_page_id = %[reqarg:realm]=%[reqarg:pgid]
#premodq_page_id = %[switch:%[reqarg:realm]:gb:list=guestbook:pg:set=pages]=%[reqarg:pgid]

access = post            all;
         post_visible    poster, superposter, moderator, admin;
         see_hidden      moderator, admin;
         see_own_hidden  auth;
         moderation      moderator, admin;
         edit            admin;
         edit_own        superposter, admin;
         edit_own_recent auth;


[html]

# %0% is a label (or empty), ``feedback'' is the only one really used
header = %[html:shorthead]
+<div class="siteheader">
+  <a href="/"><img src="/logo.png" alt="%[html:the_site_title] logo"
+      class="sitelogo" /></a>
+  <h1><a href="/">%[html:the_site_title]</a></h1>
+  %[if:%[html:the_site_motto]:<p class="sitemotto">%[html:the_site_motto]</p>]
+</div>
+<div class="clear_both"></div>
+<div class="pagerest">
+%[ifmessage:%[html:msgbox:%message%] <br />]
+<div class="sidepanel">
+  %[html:%[ifeq:%0%:feedback:main_menu_feedback:main_menu]]
+</div>

# %0% is a label (or empty), ``feedback'' is the only one really used
# Agenda doesn't use the argument, but it is still there
footer =
+<div class="clear_both"></div>
+%[sess:ifvalid:
+ %[html:buttonform:%[req:script]/rmsession:%[collapsews:
+                %[html:msg_rm_cookie_quit]]:rmsession]
+:]
+</div>   <!-- pagerest -->
+%[html:shortfooter]


userproflink =
+<a href="%[req:script]/profile" %0%><strong>%[sess:user]</strong></a>

userpic = <img src="/userpic/%0%" alt="user picture"
    %[imgdim:userpic/%0%] align="right" %1% />


comanonuserpic = <img src="/anonuserpic.png" alt="anonymous"
+    %[imgdim:base/srvfiles/anonuserpic.png] class="comment_userpic" />
+

comuserpic_choice = %[collapsews:
+  %[iffile:userpic/%0%.jpg:%[html:comuserpic:%0%.jpg]:
+    %[iffile:userpic/%0%.png:%[html:comuserpic:%0%.png]:
+      %[iffile:userpic/%0%.gif:%[html:comuserpic:%0%.gif]:
+          %[html:comnouserpic]]]]
+]
+

showcmt_parentlink = <span style="margin: 0 0 0 3em;">[<a
+  href="%[discuss:orig_url:%0%]">%[html:msg_in_reply]</a>]</span>


# %0% cmd_id   %1% user (empty for anon)   %2% From-name    %3% date
# %4% parent (empty for none)  %5% orig_page url   %6% title  %7% content
comment_view_code =
+<div class="comment">
+<div class="comment_head">
+%[html:%[if:%1%:comuserpic_choice:comanonuserpic]:%1%]
+<p>%[html:text_from] %2%
+    %[if:%1%:%[html:userlink:%1%]:(<em>%[html:text_unverified]</em>)]
+    %3%
+    %[if:%4%:%[html:text_in_reply_to_cmt1]
+             <a href="%5%#cmt%4%">%[html:text_in_reply_to_cmt2]</a>
+             %[html:text_in_reply_to_cmt3]:]
+</p>
+<h3><a href="%5%%[if:%0%:#cmt%0%]">%6%</a></h3>
+</div>
+<div class="comment_content">
+%7%
+</div></div>
+

# %0% must be comment id
showcomment =
+%[html:comment_view_code:%0%
    :%[discuss:ifanon:%0%::%[discuss:user:%0%]]:%[discuss:username:%0%]
    :%[rfcdate:%[discuss:unixtime:%0%]]
    :%[discuss:ifparent:%0%:%[discuss:parent:%0%:]]:%[discuss:page_url:%0%:]:
    %[discuss:title:%0%]:%[discuss:body:%0%]]

# %0% parent id,  %1% orig_url
comment_preview =
+%[html:comment_view_code::%[cmtpreview:user]:%[cmtpreview:username]:
+%[rfcdate:%now%]:%0%:%1%:%[cmtpreview:title]:%[cmtpreview:body]]


pqlleft = <span class="nav_arr">
  <a href="%[req:script]/cmta/%0%/%1%/%2%#moder">%[html:text_nav_previous]</a>
  &bullet;</span>
pqlright = <span class="nav_arr">&bullet;
  <a href="%[req:script]/cmta/%0%/%1%/%2%#moder">%[html:text_nav_next]</a>
  </span>
pqlup = <span class="nav_arr">
  <a href="%[req:script]/moderation#%0%%1%c%2%">%[html:text_nav_index]</a>
  </span>

modernavblock =
+<div class="news_navlinks">
+%[if:%[sess:pqprev:%1%=%2%:%3%]:
+        %[splitpremodq:html:pqlleft:%[sess:pqprev:%1%=%2%:%3%]]]
+%[html:pqlup:%1%:%2%:%3%]
+%[if:%[sess:pqnext:%1%=%2%:%3%]:
+        %[splitpremodq:html:pqlright:%[sess:pqnext:%1%=%2%:%3%]]]
+</div>



userlink = <a href="/thalcgi.cgi/profile/%0%"><img src="/person.png"
+  height="12px" alt="profile" /></a>

[page /status]

session_required = no
embedded = yes
post_allowed = no

selector = %[sess:ifvalid:%[sess:ifloggedin:logged:notlogged]:nosess]

template = %html:shorthead:<!-- fuck -->:class="short_status"%
+ <div class="thalcgi_status">%[page:info]</div>
+ %html:shorttail%

info:logged =
+ <img class="smallpic" src="/person.png" height="12px" alt="profile" />
+ <a href="%[req:script]/" target="_top"><strong>%[sess:user]</strong></a>

info:notlogged =
+<a href="%[req:script]/" target="_top">%[html:msg_sess_active_short]</a>
+<br /> <a href="%[req:script]/login" target="_top">log in</a>

info:nosess =
+<a href="%[req:script]/" target="_top">%[html:msg_no_cookie_short]</a>



[message]

server_side_error = Ошибка на стороне сервера.  Сообщите об этом
  владельцу сайта.

cookie_set = Cookie установлена, рабочий сеанс открыт.
  Теперь вам доступны интерактивные возможности сайта.

cookie_removed = Рабочий сеанс закрыт, cookie удалена.

field_not_filled = Не все обязательные поля заполнены.

logged_in = Вы успешно вошли на сайт.

wrong_login_password = Неверный идентификатор пользователя или пароль.

wrong_password = Неверный пароль.

login_unknown = Неизвестный идентификатор пользователя.

invalid_login_name = Идентификатор пользователя не соответствует требованиям
  сайта.  Попробуйте указать другой.

login_not_available = Введённый идентификатор пользователя уже существует
  или заблокирован.  Попробуйте указать другой.

pass_req_too_early = У вас ещё есть неиспользованные пароли и с момента
  их отправки прошло меньше суток.  Попробуйте позже.

invalid_email_address = Введённый вами адрес не соответствует
  формату адресов электронной почты.

email_already_used = Этот адрес электронной почты используется
  существующим пользователем сайта.  Если вы забыли свой идентификатор
  пользователя, обратитесь к администраторам сайта.

email_belonged_to_other = Этот адрес электронной почты ранее был 
  подтверждён как принадлежащий другому пользователю сайта.  Система
  не позволяет менять владельца почтового адреса; если вы уверены, что
  это необходимо, обратитесь к администраторам сайта.

email_recently_tried = На этот адрес электронной почты недавно пытались
  зарегистрировать пользователя, но не подтвердили регистрацию.  Во избежание
  засорения почтовых ящиков третьих лиц сайт некоторое время не позволяет
  отправлять новые регистрационные сообщения на тот же адрес.

email_banned = Этот адрес электронной почты или весь почтовый домен
  внесён в стоп-лист.

changemail_too_early = Вы не так давно уже запрашивали изменение своего
  адреса.  Попробуйте снова через некоторое время.

changemail_canceled = Запрос на изменение адреса отменён.

invalid_feedback_category = Заданная категория сообщений обратной связи
  не сконфигурирована.  Сообщите об этой ошибке владельцу сайта.

email_sent_to_you = Сообщение успешно отправлено на ваш адрес
  электронной почты.

your_email_sent = Ваше сообщение успешно отправлено.

error_sending_email = Ошибка при попытке отправить email.
  Приносим свои извинения.

new_values_saved = Данные успешно сохранены.

email_changed = Ваш почтовый адрес успешно изменён.

wrong_confirmation_code = Неверный код подтверждения.

not_really_confirm = Для подтверждения операции необходимо ввести слово
  &laquo;really&raquo; в соответствующее поле.

comment_deleted = Комментарий успешно удалён.

# reply_orig_not_found = Не найдена страница или комментарий, на которые
#   вы пытаетесь ответить.

comment_queued_for_premod = Комментарий помещён в очередь на премодерацию
  и появится (либо не появится) после проверки. <strong>Просьба не
  отправлять комментарии повторно</strong>, это никак не ускорит
  процесс премодерации, но может отрицательно повлиять на её результат.

comment_saved = Комментарий отправлен успешно.  Иногда новые комментарии
  появляются не сразу, поскольку сайт построен на генерации статических
  страниц, так что перегенерация страницы, содержащей ваш комментарий,
  может занять определённое время.

page_regenerated = Перегенерация страницы выполнена.

not_logged_in = Эта возможность доступна только зарегистрированным
  пользователям после входа на сайт.

not_this_way = Это так не работает :-)

permission_denied = У вас недостаточно полномочий для выполнения
  запрошенного действия.

anon_denied = Запрошенное действие недоступно для анонимных пользователей.

not_implemented_yet = Извините, эта возможность ещё не реализована.

bug_in_the_code = Ошибка в программном коде, реализующем функции сайта.
  Сообщите об этом владельцу сайта.





[html]

msg_rm_cookie_quit = Убрать cookie и закрыть сеанс работы

msg_solve_captcha = Введите строку, составленную из букв, переставленных
+ как показано на картинке справа.   Используются только цифры и латинские
+ буквы, регистр букв не учитывается:

msg_set_cookie = Установить cookie и создать сеанс работы

msg_logged_only = Эта страница доступна только пользователям,
+ вошедшим в систему

msg_to_change_uid = Чтобы сменить имя пользователя, закройте рабочий
+ сеанс с помощью кнопки внизу страницы.

msg_in_reply = в ответ на это

msg_unverified = не проверено

msg_permissions = Права доступа

msg_logged_as = Вы вошли в систему под именем

msg_can_comment = Вы можете оставлять комментарии.

msg_can_see_hidden = Вы можете видеть скрытые комментарии.

msg_can_see_own = Вы можете видеть ваши собственные скрытые комментарии.

msg_one_of_the = Вы входите в число

msg_moderators = модераторов

msg_can_edit = Вы можете редактировать комментарии.

msg_can_edit_own = Вы можете редактировать ваши собственные комментарии.

msg_edit_comment_within = После отправки комментария вы можете
+ редактировать его в течение

msg_to_main_page = На главную страницу

msg_comment_format_tip = Пустые строки используются как разделители абзацев.
+ Разрешены следующие HTML-тэги:

msg_sess_active_short = сеанс активен

msg_no_cookie_short = cookie нет

msg_sess_active = Сеанс работы активен.

msg_more_info = Больше информации...

msg_no_cookie = Cookie не установлена, сеанс отсутствует.

msg_close_sess_to_logout = Для выхода из системы закройте ваш сеанс работы
+ с помощью кнопки, расположенной внизу каждой интерактивной страницы,
+ включая эту.

msg_signup = Зарегистрироваться

msg_single_use_pass = Одноразовый пароль

msg_send_more_pass = Прислать ещё пароли

msg_comment = Комментарий

msg_user_unknown = пользователь неизвестен на этом сайте

msg_your_profile = Ваш профиль

msg_user_id = Пользовательский идентификатор (входное имя)

msg_visible_name = Видимое имя пользователя

msg_site_url_field = URL сайта (не обязательно)

msg_do_save = Сохранить

msg_do_change = Изменить

msg_email_field = Адрес электронной почты

msg_email_change = Изменение адреса электронной почты

msg_your_current_email = Ваш текущий (подтверждённый) адрес

msg_new_email = Новый адрес электронной почты

msg_send_confirmcode = Отправить код подтверждения

msg_confirm_code = Код подтверждения

msg_confirm_really = Подтвердите (наберите слово &ldquo;really&rdquo;)

msg_cancel_addr_change = Отменить смену адреса!

msg_do_submit = Отправить

msg_do_signup = Войти!

msg_your_email_field = Ваш адрес электронной почты

msg_subject_field = Тема письма

msg_message_category = Категория

msg_change_category = сменить категорию

msg_message_text_field = Текст письма

msg_do_send_message = Послать письмо

msg_message_sent_hdr = Письмо отправлено

msg_message_sent = Ваше сообщение успешно отправлено.

msg_view_your_comment_status = Просмотр вашего комментария и статуса модерации

msg_view_your_comment = Просмотр вашего комментария

msg_jump_to_origin = К странице/комментарию, на которые вы отвечали

msg_jump_to_new_comment = К вашему новому комментарию

msg_top_level_comment_hdr = Комментарий верхнего уровня (ответ на текст
+ страницы)

msg_rep_to_comment_hdr = Ответ на комментарий

msg_comment_preview_hdr = Предварительный просмотр (комментарий ещё не
+ сохранён!)

msg_comment_hidden_hdr = Этот комментарий скрыт

msg_cant_reply_hidden = Невозможно ответить на комментарий, который
+ существует, но помечен как скрытый.

msg_comment_not_found_hdr = Страница или комментарий не найдены

msg_permission_denied_hdr = Доступ запрещён

msg_comment_visname_field = Ваше имя

msg_comment_subject_field = Тема

msg_comment_text_field = Текст комментария

msg_do_preview = Предварительный просмотр

msg_comments_disabled_hdr = Комментарии отключены

msg_comment_hidden_hdr = У вас нет полномочий на просмотр этого комментария

msg_comment_view_hdr = Просмотр комментария

msg_comment_edit_hdr = Редактирование комментария

msg_deletion_hdr = Удаление

msg_to_delete_comment = Чтобы удалить комментарий, введите слово 
+ &laquo;really&raquo; и нажмите кнопку &laquo;Удалить&raquo;.  Эта
+ операция не может быть отменена.

msg_do_delete = Удалить

msg_moderation_hdr = Модерация

msg_hidden_can_show = Комментарий скрыт.

msg_do_show = Раскрыть

msg_can_remove_from_q = Комментарий можно удалить из очереди, не показывая его.

msg_do_rm_from_q = Удалить из очереди

msg_do_hide = Скрыть

msg_comment_is_visible = Комментарий теперь виден.

msg_moder_q_hdr = Очередь на модерацию

msg_existing_topics = Список существующих обсуждений

msg_noaccess = У вас нет доступа к этой странице.

msg_comment_list = список комментариев

msg_wrote_via_form = написал, используя контактную форму на сайте:


# cgilocal.ini
# If you'd like to add some custom CGI-served pages, use this file to do so.




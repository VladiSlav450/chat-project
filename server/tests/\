# server/tests/CMakeLists.txt

set(CHECK_INCLUDE_DIR $ENV{HOME}/my_program/local_check/include)
set(CHECK_LIBRARY     $ENV{HOME}/my_program/local_check/lib/libcheck.a)

if(NOT EXISTS ${CHECK_INCLUDE_DIR}/check.h)
    message(FATAL_ERROR "Check.h not find: ${CHECK_INCLUDE_DIR}/check.h")
endif()

if(NOT EXISTS ${CHECK_LIBRARY})
    message(FATAL_ERROR "libcheck.a not find: ${CHECK_LIBRARY}")
endif()

include_directories(${CHECK_INCLUDE_DIR})

file(GLOB TEST_SOURCES *.cpp *.h)

add_executable(server_tests ${TEST_SOURCES})

target_link_libraries(server_tests PRIVATE ${CHECK_LIBRARY} pthread)
